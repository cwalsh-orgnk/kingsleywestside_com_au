/*!
 * @splidejs/splide-extension-auto-scroll
 * Version  : 0.5.3
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */function vn(n){n.length=0}function F(n,t,e){return Array.prototype.slice.call(n,t,e)}function S(n){return n.bind.apply(n,[null].concat(F(arguments,1)))}function C(n){return requestAnimationFrame(n)}function R(n,t){return typeof t===n}var j=Array.isArray;S(R,"function");S(R,"string");S(R,"undefined");function k(n){return j(n)?n:[n]}function H(n,t){k(n).forEach(t)}var En=Object.keys;function mn(n,t,e){if(n){var r=En(n);r=e?r.reverse():r;for(var o=0;o<r.length;o++){var i=r[o];if(i!=="__proto__"&&t(n[i],i)===!1)break}}return n}function pn(n){return F(arguments,1).forEach(function(t){mn(t,function(e,r){n[r]=t[r]})}),n}var yn=Math.min;function An(){var n=[];function t(a,c,f,l){o(a,c,function(s,v,d){var g="addEventListener"in s,E=g?s.removeEventListener.bind(s,v,f,l):s.removeListener.bind(s,f);g?s.addEventListener(v,f,l):s.addListener(f),n.push([s,v,d,f,E])})}function e(a,c,f){o(a,c,function(l,s,v){n=n.filter(function(d){return d[0]===l&&d[1]===s&&d[2]===v&&(!f||d[3]===f)?(d[4](),!1):!0})})}function r(a,c,f){var l,s=!0;return typeof CustomEvent=="function"?l=new CustomEvent(c,{bubbles:s,detail:f}):(l=document.createEvent("CustomEvent"),l.initCustomEvent(c,s,!1,f)),a.dispatchEvent(l),l}function o(a,c,f){H(a,function(l){l&&H(c,function(s){s.split(" ").forEach(function(v){var d=v.split(".");f(l,d[0],d[1])})})})}function i(){n.forEach(function(a){a[4]()}),vn(n)}return{bind:t,unbind:e,dispatch:r,destroy:i}}var K="move",U="moved",gn="updated",Y="drag",hn="dragged",J="scroll",Q="scrolled",bn="destroy";function Ln(n){var t=n?n.event.bus:document.createDocumentFragment(),e=An();function r(i,a){e.bind(t,k(i).join(" "),function(c){a.apply(a,j(c.detail)?c.detail:[])})}function o(i){e.dispatch(t,i,F(arguments,1))}return n&&n.event.on(bn,e.destroy),pn(e,{bus:t,on:r,off:S(e.unbind,t),emit:o})}function nn(n,t,e,r){var o=Date.now,i,a=0,c,f=!0,l=0;function s(){if(!f){if(a=n?yn((o()-i)/n,1):1,e&&e(a),a>=1&&(t(),i=o(),r&&++l>=r))return d();C(s)}}function v(h){!h&&E(),i=o()-(h?a*n:0),f=!1,C(s)}function d(){f=!0}function g(){i=o(),a=0,e&&e(a)}function E(){c&&cancelAnimationFrame(c),a=0,c=0,f=!0}function T(h){n=h}function b(){return f}return{start:v,rewind:g,pause:d,cancel:E,set:T,isPaused:b}}function On(n,t){var e;function r(){e||(e=nn(t||0,function(){n(),e=null},null,1),e.start())}return r}var Tn="is-active",_n="slide",Dn="fade";function tn(n,t,e){return Array.prototype.slice.call(n,t,e)}function M(n){return n.bind(null,...tn(arguments,1))}function w(n,t){return typeof t===n}function x(n){return!en(n)&&w("object",n)}const Sn=Array.isArray;M(w,"function");M(w,"string");const wn=M(w,"undefined");function en(n){return n===null}function Vn(n){return Sn(n)?n:[n]}function D(n,t){Vn(n).forEach(t)}function Nn(n,t,e){n&&D(t,r=>{r&&n.classList[e?"add":"remove"](r)})}const $n=Object.keys;function rn(n,t,e){if(n){let r=$n(n);r=e?r.reverse():r;for(let o=0;o<r.length;o++){const i=r[o];if(i!=="__proto__"&&t(n[i],i)===!1)break}}return n}function W(n){return tn(arguments,1).forEach(t=>{rn(t,(e,r)=>{n[r]=t[r]})}),n}function In(n,t){D(n,e=>{D(t,r=>{e&&e.removeAttribute(r)})})}function un(n,t,e){x(t)?rn(t,(r,o)=>{un(n,o,r)}):D(n,r=>{en(e)||e===""?In(r,t):r.setAttribute(t,String(e))})}const{min:X,max:Z,floor:Rn,ceil:Mn,abs:Bn}=Math;function Pn(n,t,e){const r=X(t,e),o=Z(t,e);return X(Z(r,n),o)}const xn={speed:1,autoStart:!0,pauseOnHover:!0,pauseOnFocus:!0},Fn={startScroll:"Start auto scroll",pauseScroll:"Pause auto scroll"};function Gn(n,t,e){const{on:r,off:o,bind:i,unbind:a}=Ln(n),{translate:c,getPosition:f,toIndex:l,getLimit:s}=t.Move,{setIndex:v,getIndex:d}=t.Controller,{orient:g}=t.Direction,{toggle:E}=t.Elements,{Live:T}=t,{root:b}=n,h=On(t.Arrows.update,500);let m={},p,y,V,N,$,_;function on(){const{autoScroll:u}=e;m=W({},xn,x(u)?u:{})}function B(){n.is(Dn)||!p&&e.autoScroll!==!1&&(p=nn(0,cn),an(),sn())}function G(){p&&(p.cancel(),p=null,_=void 0,o([K,Y,J,U,Q]),a(b,"mouseenter mouseleave focusin focusout"),a(E,"click"))}function an(){m.pauseOnHover&&i(b,"mouseenter mouseleave",u=>{V=u.type==="mouseenter",I()}),m.pauseOnFocus&&i(b,"focusin focusout",u=>{N=u.type==="focusin",I()}),m.useToggleButton&&i(E,"click",()=>{y?L():O()}),r(gn,fn),r([K,Y,J],()=>{$=!0,O(!1)}),r([U,hn,Q],()=>{$=!1,I()})}function fn(){const{autoScroll:u}=e;u!==!1?(m=W({},m,x(u)?u:{}),B()):G(),p&&!wn(_)&&c(_)}function sn(){m.autoStart&&(document.readyState==="complete"?L():i(window,"load",L))}function L(){P()&&(p.start(!0),T.disable(!0),N=V=y=!1,q())}function O(u=!0){y||(y=u,q(),P()||(p.pause(),T.disable(!1)))}function I(){y||(V||N||$?O(!1):L())}function cn(){const u=f(),A=ln(u);u!==A?(c(A),dn(_=f())):(O(!1),m.rewind&&n.go(m.speed>0?0:t.Controller.getEnd())),h()}function ln(u){const A=m.speed||1;return u+=g(A),n.is(_n)&&(u=Pn(u,s(!1),s(!0))),u}function dn(u){const{length:A}=n,z=(l(u)+A)%A;z!==d()&&(v(z),t.Slides.update(),t.Pagination.update(),e.lazyLoad==="nearby"&&t.LazyLoad.check())}function q(){if(E){const u=y?"startScroll":"pauseScroll";Nn(E,Tn,!y),un(E,"aria-label",e.i18n[u]||Fn[u])}}function P(){return!p||p.isPaused()}return{setup:on,mount:B,destroy:G,play:L,pause:O,isPaused:P}}export{Gn as A};
